<%= form_with model: model , data: {controller: "code-title-edit"} do |form| %>
  <div class="flex items-bottom items-baseline">
  <%# // タイトルの編集 %>
    <h2 id="code_title" class="mt-10 text-4xl pr-4"><%= @code.title %></h2>
    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 25 25" fill="currentColor" data-action="click->code-title-edit#edit" id="code_title_edit" class="opacity-70 text-black cursor-pointer  hover:opacity-50">
      <g clip-path="url(#clip0_373_2)">
        <path d="M17.474 5.00008L21.3889 8.91501C21.5538 9.07994 21.5538 9.34904 21.3889 9.51397L11.9097 18.9931L7.88194 19.4402C7.34375 19.5009 6.88802 19.0452 6.94878 18.507L7.39583 14.4792L16.875 5.00008C17.0399 4.83515 17.309 4.83515 17.474 5.00008ZM24.5052 4.00616L22.3872 1.8881C21.7274 1.22838 20.6554 1.22838 19.9913 1.8881L18.4549 3.42456C18.2899 3.58949 18.2899 3.85859 18.4549 4.02352L22.3698 7.93845C22.5347 8.10338 22.8038 8.10338 22.9687 7.93845L24.5052 6.40199C25.1649 5.73793 25.1649 4.66588 24.5052 4.00616ZM16.6667 16.415V20.8334H2.77778V6.94453H12.7517C12.8906 6.94453 13.0208 6.8881 13.1207 6.79262L14.8568 5.0565C15.1866 4.72664 14.9523 4.16675 14.4878 4.16675H2.08333C0.93316 4.16675 0 5.09991 0 6.25008V21.5279C0 22.678 0.93316 23.6112 2.08333 23.6112H17.3611C18.5113 23.6112 19.4444 22.678 19.4444 21.5279V14.6789C19.4444 14.2145 18.8845 13.9845 18.5547 14.31L16.8186 16.0461C16.7231 16.1459 16.6667 16.2761 16.6667 16.415Z"/>
      </g>
    </svg>
  </div>
  <%= form.text_field :title , id: "code_title_input" ,class: "hidden mt-10 text-4xl",data: {action: "keydown.enter->code-title-edit#noSubmit"} %>
  <% if controller.action_name != "new" %>
    <p class="pt-1">Created by <span class="underline"><%= @code.user.name %></span></p>
  <% end %>
  <%# // タグの登録 %>
  <div class="flex justify-between pt-7">
    <label class="input input-bordered border-black flex items-center gap-2 h-10 min-h-10">
      <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20" fill="none">
        <g clip-path="url(#clip0_88_278)">
          <path d="M0 9.84836V1.875C0 0.839453 0.839453 0 1.875 0H9.84836C10.3456 2.6003e-06 10.8226 0.197548 11.1742 0.54918L19.4508 8.82582C20.183 9.55805 20.183 10.7452 19.4508 11.4775L11.4775 19.4508C10.7452 20.183 9.55805 20.183 8.82582 19.4508L0.54918 11.1742C0.197548 10.8226 2.6003e-06 10.3456 0 9.84836ZM4.375 2.5C3.33945 2.5 2.5 3.33945 2.5 4.375C2.5 5.41055 3.33945 6.25 4.375 6.25C5.41055 6.25 6.25 5.41055 6.25 4.375C6.25 3.33945 5.41055 2.5 4.375 2.5Z" fill="#333333"/>
        </g>
      </svg>
    <input type="text" class="grow" placeholder="Search tag" />
    </label>
    <%# // 画像のアップロード %>
    <%= form.file_field :image %>
    <div class="flex gap-2">
       <%# //保存ボタン %>
      <%= form.button type: "submit", class: "btn h-10 min-h-10 flex btn-neutral hover:opacity-70" do %>
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 23 23" fill="white">
          <path d="M21.751 5.34478L17.6552 1.24897C17.2157 0.809435 16.6195 0.562503 15.9979 0.5625H2.90625C1.61182 0.5625 0.5625 1.61182 0.5625 2.90625V20.0938C0.5625 21.3882 1.61182 22.4375 2.90625 22.4375H20.0938C21.3882 22.4375 22.4375 21.3882 22.4375 20.0938V7.00205C22.4375 6.38045 22.1906 5.78431 21.751 5.34478ZM11.5 19.3125C9.77412 19.3125 8.375 17.9134 8.375 16.1875C8.375 14.4616 9.77412 13.0625 11.5 13.0625C13.2259 13.0625 14.625 14.4616 14.625 16.1875C14.625 17.9134 13.2259 19.3125 11.5 19.3125ZM16.1875 4.44336V9.35156C16.1875 9.67515 15.9251 9.9375 15.6016 9.9375H4.27344C3.94985 9.9375 3.6875 9.67515 3.6875 9.35156V4.27344C3.6875 3.94985 3.94985 3.6875 4.27344 3.6875H15.4316C15.5871 3.6875 15.7361 3.74922 15.8459 3.85913L16.0159 4.02905C16.0703 4.08345 16.1135 4.14804 16.1429 4.21913C16.1724 4.29022 16.1875 4.36641 16.1875 4.44336Z"/>
        </svg>
        <p class="text-lg">Save</p>
      <% end %>
      <% unless action_name == "new" %>
        <% if @favorite == nil %>
          <%# // お気に入りボタン %>
          <%= link_to code_favorite_path(model), class:"btn h-10 min-h-10 flex bg-gray-200 px-3", data: { turbo_method: :post} do %>
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 25 25" fill="#333333">
            <g clip-path="url(#clip0_88_301)">
              <path d="M22.5738 3.49576C19.8981 1.21549 15.9186 1.62564 13.4625 4.15982L12.5006 5.15104L11.5387 4.15982C9.08751 1.62564 5.10314 1.21549 2.42736 3.49576C-0.639049 6.11295 -0.800182 10.8102 1.94396 13.6471L11.3922 23.403C12.0026 24.0329 12.9938 24.0329 13.6041 23.403L23.0524 13.6471C25.8014 10.8102 25.6402 6.11295 22.5738 3.49576Z"/>
            </g>
          </svg>
          <% end %>
        <% else %>
          <%# // お気に入り削除ボタン %>
          <%= link_to code_favorite_path(model), class:"btn h-10 min-h-10 flex bg-gray-200 px-3", data: { turbo_method: :delete} do %>
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 25 25" fill="#F4858A">
            <g clip-path="url(#clip0_88_301)">
              <path d="M22.5738 3.49576C19.8981 1.21549 15.9186 1.62564 13.4625 4.15982L12.5006 5.15104L11.5387 4.15982C9.08751 1.62564 5.10314 1.21549 2.42736 3.49576C-0.639049 6.11295 -0.800182 10.8102 1.94396 13.6471L11.3922 23.403C12.0026 24.0329 12.9938 24.0329 13.6041 23.403L23.0524 13.6471C25.8014 10.8102 25.6402 6.11295 22.5738 3.49576Z"/>
            </g>
          </svg>
          <% end %>
        <% end %>
      <% end %>
      <%# // プライベートボタン %>
      <%= link_to "#", class:"btn h-10 min-h-10 flex bg-gray-200 px-3" do %>
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 25 25" fill="#333333">
          <path d="M21.0938 10.9375H19.9219V7.42188C19.9219 3.33008 16.5918 0 12.5 0C8.4082 0 5.07812 3.33008 5.07812 7.42188V10.9375H3.90625C2.6123 10.9375 1.5625 11.9873 1.5625 13.2812V22.6562C1.5625 23.9502 2.6123 25 3.90625 25H21.0938C22.3877 25 23.4375 23.9502 23.4375 22.6562V13.2812C23.4375 11.9873 22.3877 10.9375 21.0938 10.9375ZM16.0156 10.9375H8.98438V7.42188C8.98438 5.4834 10.5615 3.90625 12.5 3.90625C14.4385 3.90625 16.0156 5.4834 16.0156 7.42188V10.9375Z"/>
        </svg>
      <% end %>
      <% if controller.action_name == "edit" %>
        <%# // 削除ボタン %>
        <%= link_to code_path(model), class: "btn btn-error h-10 min-h-10 hover:opacity-70 px-3", data: { turbo_method: :delete, turbo_confirm: t('message.confirm_delete')} do%>
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 25 25" fill="#333333">
            <g clip-path="url(#clip0_88_305)">
              <path d="M22.6562 1.56251H16.7969L16.3379 0.649423C16.2407 0.454215 16.0909 0.29001 15.9054 0.175281C15.72 0.0605526 15.5062 -0.00014785 15.2881 8.5609e-06H9.70703C9.48944 -0.000827891 9.27602 0.0596463 9.09121 0.174503C8.90641 0.289359 8.75769 0.453951 8.66211 0.649423L8.20312 1.56251H2.34375C2.13655 1.56251 1.93784 1.64482 1.79132 1.79133C1.64481 1.93784 1.5625 2.13656 1.5625 2.34376L1.5625 3.90626C1.5625 4.11346 1.64481 4.31217 1.79132 4.45869C1.93784 4.6052 2.13655 4.68751 2.34375 4.68751H22.6562C22.8635 4.68751 23.0622 4.6052 23.2087 4.45869C23.3552 4.31217 23.4375 4.11346 23.4375 3.90626V2.34376C23.4375 2.13656 23.3552 1.93784 23.2087 1.79133C23.0622 1.64482 22.8635 1.56251 22.6562 1.56251ZM4.16016 22.8027C4.19742 23.3978 4.46004 23.9562 4.89456 24.3644C5.32908 24.7727 5.90283 24.9999 6.49902 25H18.501C19.0972 24.9999 19.6709 24.7727 20.1054 24.3644C20.54 23.9562 20.8026 23.3978 20.8398 22.8027L21.875 6.25001H3.125L4.16016 22.8027Z"/>
            </g>
          </svg>
        <% end %>
      <% end %>
    </div>
  </div>
  <%# // HTMLエディタ %>
  <div>
    <%= form.text_area :body_html, id: "editorSource_HTML" %>
  </div>
<% end %>
<div class="flex my-4">
  <%# // タブの切り替え %>
  <div role="tablist" class="tabs tabs-lifted flex-1 grid grid-cols-[auto_1fr_auto] place-content-start">
    <input
      type="radio"
      name="my_tabs_2"
      role="tab"
      class="tab bg-base-100 [--tab-bg:#333333] checked:text-white csustom-tag-width"
      aria-label="HTML"
      checked="checked"
      />
    <div role="tabpanel" class="tab-content bg-customGray border-base-300 rounded-box ">
      <div id="editor_HTML" class=""></div> <%# HTML_editor挿入位置 %>
    </div>

    <input
      type="radio"
      name="my_tabs_2"
      role="tab"
      class="tab bg-base-100 [--tab-bg:#333333] checked:text-white csustom-tag-width"
      aria-label="CSS"
      />
    <div role="tabpanel" class="tab-content border-base-300 rounded-box p-6">
      Tab content 2
    </div>

    <button href="#" class="justify-self-end h-8 place-content-center flex items-center hover:opacity-50 cursor-copy">
      <svg xmlns="http://www.w3.org/2000/svg" width="18" height="20" viewBox="0 0 18 20" fill="currentColor" class="opacity-70 text-black">
        <path d="M12.75 17.5V19.0625C12.75 19.5803 12.3303 20 11.8125 20H1.1875C0.669727 20 0.25 19.5803 0.25 19.0625V4.6875C0.25 4.16973 0.669727 3.75 1.1875 3.75H4V15.3125C4 16.5187 4.98129 17.5 6.1875 17.5H12.75ZM12.75 4.0625V0H6.1875C5.66973 0 5.25 0.419727 5.25 0.9375V15.3125C5.25 15.8303 5.66973 16.25 6.1875 16.25H16.8125C17.3303 16.25 17.75 15.8303 17.75 15.3125V5H13.6875C13.1719 5 12.75 4.57812 12.75 4.0625ZM17.4754 2.85043L14.8996 0.27457C14.7238 0.0987666 14.4853 1.29998e-06 14.2367 0L14 0V3.75H17.75V3.51332C17.75 3.26469 17.6512 3.02624 17.4754 2.85043Z"/>
      </svg>
      <span class="items-center px-2">copy</span>
    </button>
  </div>
  <iframe id="live_frame" class="flex-1 bg-gray-100 mt-8"></iframe>
</div>

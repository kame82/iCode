<div class="container py-10 mx-10 mx-auto">
  <% if action_name == "favorites" %>
    <h2 class="text-left text-3xl ml-6 font-bold"><%= t('title.favorite_index') %></h2>
  <% elsif action_name == "my_codes" %>
    <h2 class="text-left text-3xl ml-6 font-bold"><%= t('title.my_code_index') %></h2>
  <% else %>
  <h2 class="text-left text-3xl ml-6 font-bold"><%= t('title.code_index') %></h2>
  <% end %>
  <div class="py-4 bg-gray-950 rounded mt-11 sp:mt-6">
    <div class="mx-4 flex justify-between">
      <div class="flex gap-2">
        <label class="input input-bordered flex items-center gap-2 max-w-60 h-full min-h-10">
          <input type="text" class="grow  w-full" placeholder="Search" />
          <svg
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 16 16"
            fill="currentColor"
            class="h-5 w-5 text-black">
            <path
              fill-rule="evenodd"
              d="M9.965 11.026a5 5 0 1 1 1.06-1.06l2.755 2.754a.75.75 0 1 1-1.06 1.06l-2.755-2.754ZM10.5 7a3.5 3.5 0 1 1-7 0 3.5 3.5 0 0 1 7 0Z"
              clip-rule="evenodd" />
          </svg>
        </label>

        <%# <label class="input input-bordered flex items-center gap-2 h-10">
          <svg width="17" height="16" viewBox="0 0 21 20" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path id="Vector" d="M0.972656 9.84836V1.875C0.972656 0.839453 1.81211 0 2.84766 0H10.821C11.3183 2.6003e-06 11.7952 0.197548 12.1468 0.54918L20.4235 8.82582C21.1557 9.55805 21.1557 10.7452 20.4235 11.4775L12.4501 19.4508C11.7179 20.183 10.5307 20.183 9.79848 19.4508L1.52184 11.1742C1.1702 10.8226 0.972659 10.3456 0.972656 9.84836ZM5.34766 2.5C4.31211 2.5 3.47266 3.33945 3.47266 4.375C3.47266 5.41055 4.31211 6.25 5.34766 6.25C6.3832 6.25 7.22266 5.41055 7.22266 4.375C7.22266 3.33945 6.3832 2.5 5.34766 2.5Z" fill="#333333"/>
          </svg>
          <input type="text" class="max-w-24" placeholder="Search" />
        </label> %>
      </div>
      <div class="flex gap-2 tb:ml-2">
        <%= link_to new_code_path, data: { turbo:false }, class: "btn bg-white rounded-lg flex items-center justify-center h-full min-h-10" do %>
          <svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" viewBox="0 0 25 25" fill="currentColor" class="text-black w-5 h-10">
            <path d="M21.875 10.1562H14.8438V3.125C14.8438 2.26221 14.144 1.5625 13.2812 1.5625H11.7188C10.856 1.5625 10.1562 2.26221 10.1562 3.125V10.1562H3.125C2.26221 10.1562 1.5625 10.856 1.5625 11.7188V13.2812C1.5625 14.144 2.26221 14.8438 3.125 14.8438H10.1562V21.875C10.1562 22.7378 10.856 23.4375 11.7188 23.4375H13.2812C14.144 23.4375 14.8438 22.7378 14.8438 21.875V14.8438H21.875C22.7378 14.8438 23.4375 14.144 23.4375 13.2812V11.7188C23.4375 10.856 22.7378 10.1562 21.875 10.1562Z" fill="#333333"/>
          </svg>
          <p class="text-base sp:hidden">New</p>
        <% end %>
        <div class="flex gap-0.5">
          <%= link_to codes_path(old: "true"), class:"btn bg-white rounded-r-none flex items-center justify-center px-0 h-full min-h-10" do %>
            <svg xmlns="http://www.w3.org/2000/svg" width="27" height="25" viewBox="0 0 27 25" fill="currentColor" class="text-black w-10 h-5">
              <path d="M4.0821 14.1357L2.96842 13.0518C2.49686 12.5928 2.49686 11.8506 2.96842 11.3965L12.7156 1.9043C13.1872 1.44531 13.9497 1.44531 14.4163 1.9043L24.1635 11.3916C24.6351 11.8506 24.6351 12.5928 24.1635 13.0469L23.0498 14.1309C22.5732 14.5947 21.7957 14.585 21.3291 14.1113L15.5751 8.23242V22.2656C15.5751 22.915 15.0383 23.4375 14.3711 23.4375H12.7658C12.0986 23.4375 11.5618 22.915 11.5618 22.2656V8.23242L5.80279 14.1162C5.33624 14.5947 4.55867 14.6045 4.0821 14.1357Z" fill="#333333"/>
            </svg>
          <% end %>
          <%= link_to codes_path(latest: "true"), class:"btn bg-white rounded-l-none flex items-center justify-center px-0 h-full min-h-10" do %>
            <svg xmlns="http://www.w3.org/2000/svg" width="27" height="25" viewBox="0 0 27 25" fill="currentColor" class="text-black w-10 h-5">
                <path d="M20.6574 10.8643L21.7711 11.9482C22.2426 12.4072 22.2426 13.1494 21.7711 13.6035L12.0238 23.0957C11.5523 23.5547 10.7897 23.5547 10.3232 23.0957L0.570955 13.6035C0.0993953 13.1445 0.0993953 12.4023 0.570955 11.9482L1.68464 10.8643C2.16121 10.4004 2.93878 10.4102 3.40533 10.8838L9.16437 16.7676V2.73438C9.16437 2.08496 9.70115 1.5625 10.3684 1.5625H11.9737C12.6409 1.5625 13.1776 2.08496 13.1776 2.73438V16.7676L18.9367 10.8838C19.4032 10.4053 20.1808 10.3955 20.6574 10.8643Z" fill="#333333"/>
            </svg>
          <% end %>
        </div>
      </div>
    </div>
  </div>
  <%# // コードの一覧表示 %>
  <div class="hidden tb:block">
    <%= paginate @codes, left: 1, right: 3, outer_window: 3,window: 2 %>
  </div>
  <div class="grid autoFill gap-4 pt-4 mx-2">
  <% @codes.each do |code| %>
    <div class="relative">
    <%= link_to edit_code_path(code), data: { turbo:false }, class:"card bg-base-100 shadow-xl card-img-hover" do %>
      <figure>
          <% if code.image.present? %>
            <%= image_tag code.image.url , class:"object-cover w-full max-h-40" %>
          <% else %>
            <%= image_tag "nodata.png", class:"object-cover w-full max-h-40" %>
          <% end %>
      </figure>
      <%# // private icon %>
      <% if code.is_public == "private" %>
        <div class="absolute p-1 top-32 right-2 bg-white rounded-md private-hover">
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 25 21" fill="#333333" id="private_icon" class="opacity-85">
            <path d="M12.4999 16.1251C9.53702 16.1251 7.13859 13.8317 6.91788 10.9255L2.82023 7.7587C2.28156 8.43448 1.78585 9.14893 1.38585 9.93018C1.29649 10.1069 1.24994 10.3022 1.24994 10.5003C1.24994 10.6984 1.29649 10.8937 1.38585 11.0704C3.50421 15.2036 7.69796 18.0001 12.4999 18.0001C13.5511 18.0001 14.5652 17.8439 15.5425 17.5915L13.5155 16.0231C13.1808 16.0878 12.8408 16.1219 12.4999 16.1251ZM24.7585 18.3946L20.4402 15.0571C21.7519 13.9516 22.8308 12.5963 23.614 11.07C23.7033 10.8933 23.7499 10.698 23.7499 10.4999C23.7499 10.3018 23.7033 10.1066 23.614 9.92979C21.4956 5.79659 17.3019 3.0001 12.4999 3.0001C10.4888 3.00254 8.51031 3.50884 6.74523 4.47276L1.7757 0.631743C1.71089 0.581316 1.63679 0.544153 1.55762 0.522378C1.47844 0.500602 1.39576 0.494641 1.31428 0.504835C1.2328 0.515029 1.15413 0.541177 1.08277 0.581787C1.0114 0.622396 0.948736 0.676671 0.898353 0.741509L0.131556 1.72862C0.0298368 1.85947 -0.015743 2.02537 0.00484145 2.18982C0.0254259 2.35428 0.110489 2.50383 0.241322 2.60557L23.2241 20.3685C23.2889 20.4189 23.363 20.4561 23.4422 20.4778C23.5214 20.4996 23.6041 20.5056 23.6856 20.4954C23.767 20.4852 23.8457 20.459 23.9171 20.4184C23.9884 20.3778 24.0511 20.3235 24.1015 20.2587L24.8687 19.2716C24.9703 19.1407 25.0159 18.9748 24.9952 18.8103C24.9745 18.6458 24.8894 18.4963 24.7585 18.3946ZM17.5819 12.8478L16.0468 11.661C16.1761 11.2874 16.2447 10.8954 16.2499 10.5001C16.2575 9.9213 16.1293 9.34877 15.8755 8.82852C15.6217 8.30826 15.2495 7.85477 14.7886 7.50448C14.3278 7.15419 13.7912 6.91687 13.2221 6.81156C12.6529 6.70626 12.0669 6.73591 11.5112 6.89815C11.7468 7.21733 11.8742 7.60342 11.8749 8.0001C11.8691 8.13211 11.8489 8.26309 11.8148 8.39073L8.93937 6.16846C9.93819 5.33378 11.1982 4.87606 12.4999 4.8751C13.2387 4.87469 13.9704 5.01991 14.653 5.30244C15.3356 5.58498 15.9559 5.9993 16.4783 6.52171C17.0007 7.04412 17.415 7.66438 17.6976 8.34702C17.9801 9.02966 18.1253 9.7613 18.1249 10.5001C18.1249 11.345 17.9183 12.1325 17.5819 12.8481V12.8478Z"/>
          </svg>
        </div>
      <% end %>
      <div class="card-body p-4 gap-0">
        <div class="flex items-center">
          <h2 class="card-title">
            <span class="card-title-hover text-2xl"><%= code.title %></span>
            <% if current_user == code.user %>
              <svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 25 25" fill="currentColor" class="opacity-70 text-black">
                <g clip-path="url(#clip0_373_2)">
                  <path d="M17.474 5.00008L21.3889 8.91501C21.5538 9.07994 21.5538 9.34904 21.3889 9.51397L11.9097 18.9931L7.88194 19.4402C7.34375 19.5009 6.88802 19.0452 6.94878 18.507L7.39583 14.4792L16.875 5.00008C17.0399 4.83515 17.309 4.83515 17.474 5.00008ZM24.5052 4.00616L22.3872 1.8881C21.7274 1.22838 20.6554 1.22838 19.9913 1.8881L18.4549 3.42456C18.2899 3.58949 18.2899 3.85859 18.4549 4.02352L22.3698 7.93845C22.5347 8.10338 22.8038 8.10338 22.9687 7.93845L24.5052 6.40199C25.1649 5.73793 25.1649 4.66588 24.5052 4.00616ZM16.6667 16.415V20.8334H2.77778V6.94453H12.7517C12.8906 6.94453 13.0208 6.8881 13.1207 6.79262L14.8568 5.0565C15.1866 4.72664 14.9523 4.16675 14.4878 4.16675H2.08333C0.93316 4.16675 0 5.09991 0 6.25008V21.5279C0 22.678 0.93316 23.6112 2.08333 23.6112H17.3611C18.5113 23.6112 19.4444 22.678 19.4444 21.5279V14.6789C19.4444 14.2145 18.8845 13.9845 18.5547 14.31L16.8186 16.0461C16.7231 16.1459 16.6667 16.2761 16.6667 16.415Z"/>
                </g>
              </svg>
            <% end %>
          </h2>
        </div>
        <p class="text-xs">Created by <span class="underline"><%= "#{code.user.name} (##{code.user_id})" %></span></p>
        <%# // Tag表示 %>
        <div class="card-actions justify-start mt-2">
          <% if code.tags.present? %>
            <% code.tags.each do |tag| %>
              <div class="badge badge-neutral"><%= tag.tag_name %></div>
            <% end %>
          <% end %>
        </div>
      </div>
    <% end %>
    <%# // お気に入りボタン %>
      <% if user_favorite_code_nil?(code) %>
        <%= link_to code_favorite_path(code), class:"p-1 absolute top-32 left-2 bg-white rounded-md hover:opacity-70 fav-btn-hover", data: { turbo_method: :post} do %>
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 25 25" class="opacity-70" fill="#333333">
          <g clip-path="url(#clip0_88_301)">
            <path d="M22.5738 3.49576C19.8981 1.21549 15.9186 1.62564 13.4625 4.15982L12.5006 5.15104L11.5387 4.15982C9.08751 1.62564 5.10314 1.21549 2.42736 3.49576C-0.639049 6.11295 -0.800182 10.8102 1.94396 13.6471L11.3922 23.403C12.0026 24.0329 12.9938 24.0329 13.6041 23.403L23.0524 13.6471C25.8014 10.8102 25.6402 6.11295 22.5738 3.49576Z"/>
          </g>
        </svg>
        <% end %>
      <% elsif user_favorite_code_present?(code) %>
        <%# // お気に入り削除ボタン %>
        <%= link_to code_favorite_path(code), class:"p-1 absolute top-32 left-2 bg-white rounded-md hover:opacity-70 fav-btn-hover", data: { turbo_method: :delete} do %>
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 25 25" fill="#F4858A">
          <g clip-path="url(#clip0_88_301)">
            <path d="M22.5738 3.49576C19.8981 1.21549 15.9186 1.62564 13.4625 4.15982L12.5006 5.15104L11.5387 4.15982C9.08751 1.62564 5.10314 1.21549 2.42736 3.49576C-0.639049 6.11295 -0.800182 10.8102 1.94396 13.6471L11.3922 23.403C12.0026 24.0329 12.9938 24.0329 13.6041 23.403L23.0524 13.6471C25.8014 10.8102 25.6402 6.11295 22.5738 3.49576Z"/>
          </g>
        </svg>
        <% end %>
    <% end %>
  </div>
  <% end %>
  </div>
  <%= paginate @codes, left: 1, right: 3, outer_window: 3,window: 2 %>
</div>
